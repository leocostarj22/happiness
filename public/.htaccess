DirectoryIndex disabled
RewriteEngine On

# Setup connection to Node.js Server
# WebSocket support (Socket.IO)
RewriteCond %{HTTP:Upgrade} websocket [NC]
RewriteCond %{HTTP:Connection} upgrade [NC]
RewriteRule ^socket.io/(.*) ws://127.0.0.1:3000/happiness/socket.io/$1 [P,L]

# Socket.IO HTTP Polling support (Must come before general rules)
RewriteRule ^socket.io/(.*) http://127.0.0.1:3000/happiness/socket.io/$1 [P,L]

# General HTTP Proxy
RewriteRule ^$ http://127.0.0.1:3000/ [P,L]
RewriteRule ^(.*)$ http://127.0.0.1:3000/$1 [P,L]

# Se o Proxy acima falhar ou n√£o estiver ativo, fallback para SPA:
# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d
# RewriteRule ^ index.html [L]